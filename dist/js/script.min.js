document.addEventListener("DOMContentLoaded",()=>{var form=document.querySelector(".feedback__form"),inputs=form.querySelectorAll(".feedback__form-input"),labels=form.querySelectorAll("label"),button=form.querySelector(".feedback__form-btn");const checkValidation=(inputs,labels,identificator,inputErrorClass,labelErrorClass,wrongText)=>{var emailValidator=input=>{return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(input)},siteValidator=input=>{return/^([\wёa-я-]{2,}\.)+[\wёa-я-]{2,}$/i.test(input)};let labelElem,inputElem;if(labels.forEach(label=>{if(label.htmlFor==identificator)return labelElem=label}),inputs.forEach(input=>{if(input.name==identificator)return inputElem=input}),0<inputElem.value.length)return inputElem.classList.remove(inputErrorClass),labelElem.classList.remove(labelErrorClass),"email"==identificator?(emailValidator(inputElem.value),0!=emailValidator(inputElem.value)||(inputElem.classList.add(inputErrorClass),labelElem.innerText=wrongText,labelElem.classList.add(labelErrorClass),!1)):"website"==identificator?(siteValidator(inputElem.value),0!=siteValidator(inputElem.value)||(inputElem.classList.add(inputErrorClass),labelElem.innerText=wrongText,labelElem.classList.add(labelErrorClass),!1)):void 0};((button,inputs,labels,form)=>{button.addEventListener("click",event=>{event.preventDefault(),((inputs,labels)=>{inputs.forEach((input,i)=>{input.classList.remove("feedback__form-input--error");labels[i].classList.remove("feedback__form-label--error");if(!input.value){labels[i].innerText="Поле обязательное для заполнения";input.classList.add("feedback__form-input--error");labels[i].classList.add("feedback__form-label--error")}})})(inputs,labels),checkValidation(inputs,labels,"email","feedback__form-input--error","feedback__form-label--error","email указан некоректно"),checkValidation(inputs,labels,"website","feedback__form-input--error","feedback__form-label--error","сайт указан некоректно"),checkValidation(inputs,labels,"email","feedback__form-input--error","feedback__form-label--error","email указан некоректно")&&checkValidation(inputs,labels,"website","feedback__form-input--error","feedback__form-label--error","сайт указан некоректно")&&form.reset()})})(button,inputs,labels,form)});
